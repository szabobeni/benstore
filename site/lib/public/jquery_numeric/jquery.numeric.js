!function(e){e.fn.numeric=function(t,n){"boolean"==typeof t&&(t={decimal:t}),t=t||{},"undefined"==typeof t.negative&&(t.negative=!0);var r=t.decimal===!1?"":t.decimal||".",i=t.negative===!0?!0:!1,n="function"==typeof n?n:function(){};return this.data("numeric.decimal",r).data("numeric.negative",i).data("numeric.callback",n).keypress(e.fn.numeric.keypress).keyup(e.fn.numeric.keyup).blur(e.fn.numeric.blur)},e.fn.numeric.keypress=function(t){var n=e.data(this,"numeric.decimal"),r=e.data(this,"numeric.negative"),i=t.charCode?t.charCode:t.keyCode?t.keyCode:0;if(13==i&&"input"==this.nodeName.toLowerCase())return!0;if(13==i)return!1;var a=!1;if(t.ctrlKey&&97==i||t.ctrlKey&&65==i)return!0;if(t.ctrlKey&&120==i||t.ctrlKey&&88==i)return!0;if(t.ctrlKey&&99==i||t.ctrlKey&&67==i)return!0;if(t.ctrlKey&&122==i||t.ctrlKey&&90==i)return!0;if(t.ctrlKey&&118==i||t.ctrlKey&&86==i||t.shiftKey&&45==i)return!0;if(48>i||i>57){if(0!=this.value.indexOf("-")&&r&&45==i&&(0==this.value.length||0==e.fn.getSelectionStart(this)))return!0;n&&i==n.charCodeAt(0)&&-1!=this.value.indexOf(n)&&(a=!1),8!=i&&9!=i&&13!=i&&35!=i&&36!=i&&37!=i&&39!=i&&46!=i?a=!1:"undefined"!=typeof t.charCode&&(t.keyCode==t.which&&0!=t.which?(a=!0,46==t.which&&(a=!1)):0!=t.keyCode&&0==t.charCode&&0==t.which&&(a=!0)),n&&i==n.charCodeAt(0)&&(a=-1==this.value.indexOf(n)?!0:!1)}else a=!0;return a},e.fn.numeric.keyup=function(){var t=this.value;if(t.length>0){var n=e.fn.getSelectionStart(this),r=e.data(this,"numeric.decimal"),i=e.data(this,"numeric.negative");if(""!=r){var a=t.indexOf(r);0==a&&(this.value="0"+t),1==a&&"-"==t.charAt(0)&&(this.value="-0"+t.substring(1)),t=this.value}for(var c=[0,1,2,3,4,5,6,7,8,9,"-",r],u=t.length,l=u-1;l>=0;l--){var s=t.charAt(l);0!=l&&"-"==s?t=t.substring(0,l)+t.substring(l+1):0!=l||i||"-"!=s||(t=t.substring(1));for(var f=!1,h=0;h<c.length;h++)if(s==c[h]){f=!0;break}f&&" "!=s||(t=t.substring(0,l)+t.substring(l+1))}var o=t.indexOf(r);if(o>0)for(var l=u-1;l>o;l--){var s=t.charAt(l);s==r&&(t=t.substring(0,l)+t.substring(l+1))}this.value=t,e.fn.setSelection(this,n)}},e.fn.numeric.blur=function(){var t=e.data(this,"numeric.decimal"),n=e.data(this,"numeric.callback"),r=this.value;if(""!=r){var i=new RegExp("^\\d+$|\\d*"+t+"\\d+");i.exec(r)||n.apply(this)}},e.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",e.fn.numeric.keypress).unbind("blur",e.fn.numeric.blur)},e.fn.getSelectionStart=function(e){if(e.createTextRange){var t=document.selection.createRange().duplicate();return t.moveEnd("character",e.value.length),""==t.text?e.value.length:e.value.lastIndexOf(t.text)}return e.selectionStart},e.fn.setSelection=function(e,t){if("number"==typeof t&&(t=[t,t]),t&&t.constructor==Array&&2==t.length)if(e.createTextRange){var n=e.createTextRange();n.collapse(!0),n.moveStart("character",t[0]),n.moveEnd("character",t[1]),n.select()}else e.setSelectionRange&&(e.focus(),e.setSelectionRange(t[0],t[1]))}}(jQuery);